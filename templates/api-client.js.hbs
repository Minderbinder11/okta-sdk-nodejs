/**
 *  THIS FILE IS AUTO GENERATED - SEE CONTRIBUTOR DOCUMENTATION
 */

const qs = require('querystring');

const Client = require('./client');
const Collection = require('./collection');
const models = require('./models');

/**
 * Auto-Generated extension of {@link BaseClient}, adding the operations as defined in the API JSON spec
 *
 * @class ApiClient
 * @extends {Client}
 */
class ApiClient extends Client {
  constructor(opts) {
    super(opts);
  }

{{#each operations}}
  /**
  {{jsdocBuilder this}}
  */
  {{operationId}}({{argumentBuilder this}}) {
    let url = `${this.baseUrl}{{replacePathParams path}}`;
    {{#if queryParams.length}}
    const queryString = qs.stringify(queryParameters || {});

    url += queryString ? ('?' + queryString) : '';
    {{/if}}

    {{#if isArray}}
    return new Collection(this.http, url, models.{{responseModel}});
    {{else}}
    {{#if (eq method 'get')}}
    const request = this.http.getJson(url);
    {{/if}}
    {{#if (eq method 'post')}}
    const request = this.http.postJson(url, {
      body: postBody
    });
    {{/if}}
    {{#if responseModel}}
    return request.then(jsonRes => new models.{{responseModel}}(jsonRes, this));
    {{/if}}

    {{/if}}
  }
{{/each}}

}

module.exports = ApiClient;